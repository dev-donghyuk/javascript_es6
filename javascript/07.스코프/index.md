# 스코프

## 스코프란?

```sh
var x = 'global';

function foo () {
  var x = 'function scope';
  console.log(x);
}

foo(); // function scope
console.log(x); // global
```

- 스코프는 참조 대상 식별자(변수, 함수의 이름과 같이 어떤 대상을 다른 대상과 구분하여 식별할 수 있는 유일한 이름)를 찾아내기 위한 규칙이다. 자바스크립트는 이 규칙대로 식별자를 찾는다.

- 자신이 어디에서 선언됐는지에 의해 자신이 유효한 범위를 갖는다.

- 모든 변수는 스코프를 꼭 가지고 있다

<br/>

## 스코프의 구분

<br/>

### [전역 스코프]

- 코드 어디에서든지 참조할 수 있다.

### [지역 스코프]

- 함수 코드 블록이 만든 스코프로 함수 자신과 하위 함수에서만 참조할 수 있다.

### [전역 변수]

- 전역에서 선언된 변수이며 어디에서든 참조할 수 있다.

### [지역 변수]

- 지역(함수) 내에서 선언된 변수이며 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.

<br />

- 변수는 선언위치에 의해 스코프를 가지게 된다. 즉, 전역에서 선언된 변수는 전역 스코프를 갖는 전역 변수이고, 지역(함수)에서 선언된 변수는 지역 스코프를 갖는 지역 변수가 된다.

- 전역 스코프를 갖는 전역 변수는 전역(코드 어디서든지)에서 참조할 수 있다. 지역(함수 내부)에서 선언된 지역 변수는 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.

<br />

## 자바스크립트는 함수 레벨 스코프를 따른다

<br />

### 함수 레벨 스코프

- . 함수 레벨 스코프란 함수 코드 블록 내에서 선언된 변수는 함수 코드 블록 내에서만 유효하고 함수 외부에서는 참조할 수 없다는 것이다.

<br />

```sh
var x = 0;

{
  var x = 1;
  console.log(x); // 1
}
console.log(x);   // 1

```

<br/>

### 블록 레벨 스코프

- 함수 레벨 스코프란 함수 코드 블록 내에서 선언된 변수는 함수 코드 블록 내에서만 유효하고 함수 외부에서는 참조할 수 없다.

<br />

```sh
let y = 0;
{
  let y = 1;
  console.log(y); // 1
}
console.log(y);   // 0

```

<br/>

### 렉시컬 스코프

<br />

- 렉시컬 스코프는 함수를 어디서 호출하는지가 아니라 어디에 선언하였는지에 따라 결정된다.

```sh
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // ?
bar(); // ?
```

<br />

- 함수 bar는 전역에 선언되었다. 따라서 함수 bar의 상위 스코프는 전역 스코프이고 위 예제는 전역 변수 x의 값 1을 두번 출력한다.

<br />

### 암묵적 전역

<br />

```sh
var x = 10; // 전역 변수

function foo () {
  // 선언하지 않은 식별자
  y = 20;
  console.log(x + y);
}

foo(); // 30
```

<br />

- 이때 foo 함수의 스코프와 전역 스코프 어디에서도 변수 y의 선언을 찾을 수 없으므로 참조 에러가 발생해야 하지만 자바스크립트 엔진은 y = 20을 window.y = 20으로 해석하여 프로퍼티를 동적 생성한다. 결국 y는 전역 객체의 프로퍼티가 되어 마치 전역 변수처럼 동작한다. 이러한 현상을 암묵적 전역이라한다
